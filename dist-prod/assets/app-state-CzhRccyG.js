import{r as s,j as O}from"./react-core-cM2JEk-r.js";import{G as K,e as ee,w as te,Q as ne,j as ae,S as ie}from"./vendor-BCXCGp0y.js";import{a as k}from"./app-utils-DUdYqpyN.js";import"./components-core-D08sFHWi.js";const q=s.createContext(null),A={Hot:{leadTier:"Hot",messaging:{heroTitle:"Ready to Transform Your Marketing? Let's Talk Today.",heroSubtitle:"High-growth companies need strategic marketing leadership. Get your custom growth plan in 24 hours.",ctaText:"Schedule Strategy Call Now",urgencyMessage:"âš¡ Priority Response: We'll contact you within 1 hour",socialProof:"Join 200+ companies already accelerating growth"},pricing:{showDiscount:!0,emphasizeValue:!0,highlightSavings:!0,customMessage:"Enterprise pricing available - significant savings for qualified companies"},content:{testimonials:["enterprise_success","fast_results","roi_focused"],caseStudies:["enterprise_transformation","rapid_scale"],features:["strategic_leadership","executive_support","rapid_implementation"]}},Warm:{leadTier:"Warm",messaging:{heroTitle:"Scale Your Marketing with Expert CMO Guidance",heroSubtitle:"Growth-stage companies trust us to build marketing systems that deliver consistent results.",ctaText:"Get My Growth Strategy",socialProof:"Trusted by 200+ growing companies"},pricing:{showDiscount:!1,emphasizeValue:!0,highlightSavings:!1},content:{testimonials:["growth_success","system_building","team_development"],caseStudies:["growth_acceleration","system_optimization"],features:["strategic_planning","team_coaching","system_building"]}},Cold:{leadTier:"Cold",messaging:{heroTitle:"Build Marketing That Actually Drives Growth",heroSubtitle:"Stop wasting money on marketing that doesn't work. Get a proven system that delivers results.",ctaText:"Learn More",socialProof:"Used by companies at every growth stage"},pricing:{showDiscount:!1,emphasizeValue:!0,highlightSavings:!1},content:{testimonials:["foundational_success","problem_solving","education"],caseStudies:["foundation_building","problem_diagnosis"],features:["strategic_foundation","problem_diagnosis","education"]}},Unqualified:{leadTier:"Unqualified",messaging:{heroTitle:"Marketing Insights for Growing Businesses",heroSubtitle:"Learn proven strategies used by successful companies to build sustainable growth.",ctaText:"Get Free Resources",socialProof:"Join thousands learning marketing strategy"},pricing:{showDiscount:!1,emphasizeValue:!1,highlightSavings:!1},content:{testimonials:["educational","inspiration","accessibility"],caseStudies:["educational_content","inspiration"],features:["educational_resources","foundational_guidance","community_access"]}}},N={delay:500,maxShows:2,leadTierSpecific:{Hot:{title:"Wait! Let's Schedule Your Strategy Call",message:"You're clearly ready for growth. Don't leave without booking your priority consultation.",offer:"Free 30-minute strategy session + custom growth plan",ctaText:"Book My Priority Call"},Warm:{title:"Before You Go - Get Your Free Growth Audit",message:"We can show you exactly what's holding back your marketing.",offer:"Free marketing audit + recommendations (normally $2,500)",ctaText:"Get My Free Audit"},Cold:{title:"Get Our Marketing Success Framework",message:"Download our proven framework used by 200+ companies.",offer:"Free Marketing Growth Framework + Templates",ctaText:"Download Free Framework"},Unqualified:{title:"Stay Updated with Marketing Insights",message:"Get weekly insights on marketing strategy and growth.",offer:"Join our marketing insights newsletter",ctaText:"Get Weekly Insights"}}},se=[{id:"page_view",name:"Page View",description:"Visitor viewed the page",completed:!1},{id:"engagement",name:"Content Engagement",description:"Engaged with content for 30+ seconds",completed:!1},{id:"pricing_view",name:"Pricing View",description:"Viewed pricing information",completed:!1},{id:"form_start",name:"Form Started",description:"Started lead form",completed:!1},{id:"form_complete",name:"Form Completed",description:"Completed lead form",completed:!1},{id:"conversion",name:"Conversion",description:"Completed primary conversion action",completed:!1}],he=({children:n})=>{const[t,a]=s.useState(null),[e,l]=s.useState(null),[u,f]=s.useState(A.Unqualified);s.useEffect(()=>{(()=>{const r=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o=localStorage.getItem("ab_test_user_id")||`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g={id:r,userId:o,startTime:new Date,pageViews:[window.location.pathname],interactions:[],behavioralData:{pageViews:1,timeOnSite:0,contentEngagement:[],formAbandonment:!1,returnVisit:localStorage.getItem(`visited_${o}`)!==null,referralSource:document.referrer||"direct",deviceType:p(),scrollDepth:0,interactions:[]},conversionFunnel:se.map(d=>d.id==="page_view"?{...d,completed:!0,timestamp:new Date}:{...d}),personalization:A.Unqualified,exitIntentShown:0,conversions:[]};localStorage.setItem(`visited_${o}`,"true"),a(g)})()},[]),s.useEffect(()=>{const i=setInterval(()=>{t&&a(r=>r?{...r,behavioralData:{...r.behavioralData,timeOnSite:(Date.now()-r.startTime.getTime())/1e3}}:null)},5e3);return()=>clearInterval(i)},[t]),s.useEffect(()=>{let i;const r=g=>{g.clientY<=0&&I()&&(i=setTimeout(()=>{V()},N.delay))},o=()=>{i&&clearTimeout(i)};return document.addEventListener("mouseleave",r),document.addEventListener("mouseenter",o),()=>{document.removeEventListener("mouseleave",r),document.removeEventListener("mouseenter",o),i&&clearTimeout(i)}},[t]);const p=()=>{const i=window.innerWidth;return i<=768?"mobile":i<=1024?"tablet":"desktop"},h=s.useCallback(i=>{const r={...i,timestamp:new Date};a(o=>{if(!o)return null;const g={...o,interactions:[...o.interactions,r],behavioralData:{...o.behavioralData,interactions:[...o.behavioralData.interactions,r]}};return g.behavioralData.timeOnSite>=30&&!g.conversionFunnel.find(d=>d.id==="engagement")?.completed&&(g.conversionFunnel=g.conversionFunnel.map(d=>d.id==="engagement"?{...d,completed:!0,timestamp:new Date}:d)),g})},[]),v=s.useCallback(i=>{a(r=>r?{...r,pageViews:[...r.pageViews,i],behavioralData:{...r.behavioralData,pageViews:r.behavioralData.pageViews+1,contentEngagement:[...r.behavioralData.contentEngagement,i]}}:null)},[]),_=s.useCallback(i=>{a(r=>r?{...r,behavioralData:{...r.behavioralData,scrollDepth:Math.max(r.behavioralData.scrollDepth,i)}}:null)},[]),E=s.useCallback((i,r)=>{const o={type:"form_abandon",element:i,value:r,metadata:{abandonedAt:r},timestamp:new Date};a(g=>g?{...g,interactions:[...g.interactions,o],behavioralData:{...g.behavioralData,formAbandonment:!0,interactions:[...g.behavioralData.interactions,o]}}:null)},[]),T=s.useCallback((i,r=0,o)=>{const g={id:`conv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:i,timestamp:new Date,value:r,metadata:o};a(d=>{if(!d)return null;let b=d.conversionFunnel;return i==="form_submission"&&(b=b.map(S=>S.id==="form_complete"||S.id==="conversion"?{...S,completed:!0,timestamp:new Date,value:r}:S)),{...d,conversions:[...d.conversions,g],conversionFunnel:b}})},[]),m=s.useCallback((i,r,o,g)=>{a(d=>d?{...d,conversionFunnel:d.conversionFunnel.map(b=>b.id===i?{...b,completed:r,timestamp:r?new Date:b.timestamp,value:o,metadata:g}:b)}:null)},[]),w=s.useCallback(i=>{l(i),f(A[i.tier]),a(r=>r?{...r,leadScore:i,personalization:A[i.tier]}:null)},[]),y=s.useCallback(i=>u.content[i]||null,[u]),x=s.useCallback(i=>u.messaging[i]||"",[u]),V=s.useCallback(()=>{I()&&(a(i=>i?{...i,exitIntentShown:i.exitIntentShown+1}:null),window.dispatchEvent(new CustomEvent("showExitIntent",{detail:{config:N.leadTierSpecific[e?.tier||"Unqualified"],leadTier:e?.tier||"Unqualified"}})))},[e,t]),z=s.useCallback(()=>{window.dispatchEvent(new CustomEvent("dismissExitIntent"))},[]),I=s.useCallback(()=>t?t.exitIntentShown<N.maxShows:!1,[t]),G=s.useCallback(()=>t?.conversionFunnel||[],[t]),U=s.useCallback(()=>t?.behavioralData||{pageViews:0,timeOnSite:0,contentEngagement:[],formAbandonment:!1,returnVisit:!1,referralSource:"unknown",deviceType:"desktop",scrollDepth:0,interactions:[]},[t]),$=s.useCallback(()=>t?(Date.now()-t.startTime.getTime())/1e3:0,[t]),W=s.useCallback(()=>!!(e?.tier==="Hot"||e?.intent&&e.intent>=75),[e]),B=s.useCallback(()=>u.messaging.ctaText,[u]),P=s.useCallback(()=>e?.recommendedAction||"Learn more about our services",[e]);if(!t)return null;const c={session:t,leadScore:e,personalization:u,trackInteraction:h,trackPageView:v,trackScrollDepth:_,trackFormAbandonment:E,trackConversion:T,updateFunnelStep:m,updateLeadScore:w,getPersonalizedContent:y,getTierSpecificMessage:x,showExitIntent:V,dismissExitIntent:z,isExitIntentEligible:I,getConversionFunnelData:G,getBehavioralInsights:U,getSessionDuration:$,shouldShowUrgency:W,getOptimalCTAText:B,getRecommendedNextAction:P};return O.jsxDEV(q.Provider,{value:c,children:n},void 0,!1,{fileName:"/home/ian/projects/reboot/src/contexts/ConversionOptimizationContext.tsx",lineNumber:621,columnNumber:5},void 0)},D=()=>{const n=s.useContext(q);if(!n)throw new Error("useConversionOptimization must be used within a ConversionOptimizationProvider");return n},Y=s.createContext(null),re=[{id:"hero_cta_test",name:"Hero CTA Button Text",description:"Testing different hero CTA button text for conversion optimization",variants:[{id:"control",name:"Get Free Analysis",weight:50,config:{text:"Get Free Analysis"}},{id:"variant_a",name:"Unlock Growth Strategy",weight:25,config:{text:"Unlock Growth Strategy"}},{id:"variant_b",name:"Get My Custom Plan",weight:25,config:{text:"Get My Custom Plan"}}],status:"running",trafficSplit:[50,25,25],conversionGoals:["form_submission","email_signup"],startDate:new Date,metrics:{participants:0,conversions:{},conversionRate:{},statisticalSignificance:{},confidence:{}}},{id:"pricing_display_test",name:"Pricing Display Strategy",description:"Testing different pricing presentation approaches",variants:[{id:"control",name:"Standard Pricing",weight:50,config:{style:"standard"}},{id:"variant_a",name:"Value-First Pricing",weight:50,config:{style:"value_first"}}],status:"running",trafficSplit:[50,50],conversionGoals:["pricing_engagement","form_submission"],startDate:new Date,metrics:{participants:0,conversions:{},conversionRate:{},statisticalSignificance:{},confidence:{}}},{id:"form_optimization_test",name:"Lead Form Optimization",description:"Testing progressive form disclosure vs standard form",variants:[{id:"control",name:"Standard Form",weight:50,config:{style:"standard"}},{id:"variant_a",name:"Progressive Form",weight:50,config:{style:"progressive"}}],status:"running",trafficSplit:[50,50],conversionGoals:["form_completion","form_submission"],targetAudience:{userType:["new"],deviceType:["desktop","mobile"]},startDate:new Date,metrics:{participants:0,conversions:{},conversionRate:{},statisticalSignificance:{},confidence:{}}}],ve=({children:n})=>{const[t,a]=s.useState(re),[e,l]=s.useState({userId:"",assignments:{},createdAt:new Date}),[u,f]=s.useState("");s.useEffect(()=>{(()=>{let i=localStorage.getItem("ab_test_user_id");i||(i=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("ab_test_user_id",i)),f(i);const r=localStorage.getItem(`ab_assignments_${i}`);if(r)try{const o=JSON.parse(r);l(o)}catch(o){console.error("Failed to parse stored A/B test assignments:",o)}else l({userId:i,assignments:{},createdAt:new Date})})()},[]),s.useEffect(()=>{u&&e.assignments&&localStorage.setItem(`ab_assignments_${u}`,JSON.stringify(e))},[u,e]);const p=(c,i)=>{const r=`${c}_${i}`;let o=0;for(let g=0;g<r.length;g++){const d=r.charCodeAt(g);o=(o<<5)-o+d,o=o&o}return Math.abs(o)},h=c=>{if(e.assignments[c.id])return e.assignments[c.id];c.targetAudience;const r=p(u,c.id)%100;let o=0;for(let g=0;g<c.variants.length;g++)if(o+=c.trafficSplit[g],r<o){const d=c.variants[g].id;return l(b=>({...b,assignments:{...b.assignments,[c.id]:d}})),v(c.id),d}return c.variants[0].id},v=(c,i)=>{a(r=>r.map(o=>o.id===c?{...o,metrics:{...o.metrics,participants:o.metrics.participants+1}}:o))},_=c=>{const i=t.find(r=>r.id===c);return!i||i.status!=="running"?null:h(i)},E=(c,i,r)=>{const o=e.assignments[c];o&&(a(g=>g.map(d=>{if(d.id===c){const b={...d.metrics.conversions,[o]:(d.metrics.conversions[o]||0)+1},S=Object.values(e.assignments).filter(R=>R===o).length,C=S>0?b[o]/S*100:0;return{...d,metrics:{...d.metrics,conversions:b,conversionRate:{...d.metrics.conversionRate,[o]:C}}}}return d})),typeof window<"u"&&window.gtag&&window.gtag("event","ab_test_conversion",{test_id:c,variant_id:o,event_type:i,value:r||0}))},T=(c,i)=>{const r=t.find(Z=>Z.id===c);if(!r)return 0;const o=r.variants[0];if(i===o.id)return 0;const g=r.metrics.conversions[o.id]||0,d=r.metrics.conversions[i]||0,b=100,S=100,C=g/b,R=d/S,j=(g+d)/(b+S),H=Math.sqrt(j*(1-j)*(1/b+1/S));if(H===0)return 0;const Q=Math.abs(R-C)/H;return 2*(1-m(Math.abs(Q)))},m=c=>.5*(1+w(c/Math.sqrt(2))),w=c=>{const i=.254829592,r=-.284496736,o=1.421413741,g=-1.453152027,d=1.061405429,b=.3275911,S=c>=0?1:-1;c=Math.abs(c);const C=1/(1+b*c),R=1-((((d*C+g)*C+o)*C+r)*C+i)*C*Math.exp(-c*c);return S*R},y=c=>{const i={...c,id:`test_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,metrics:{participants:0,conversions:{},conversionRate:{},statisticalSignificance:{},confidence:{}}};a(r=>[...r,i])},x=(c,i)=>{a(r=>r.map(o=>o.id===c?{...o,...i}:o))},P={activeTests:t,userAssignments:e,getVariant:_,trackConversion:E,createTest:y,updateTest:x,startTest:c=>{x(c,{status:"running",startDate:new Date})},pauseTest:c=>{x(c,{status:"paused"})},stopTest:c=>{x(c,{status:"completed",endDate:new Date})},getTestResults:c=>{const i=t.find(r=>r.id===c);return i?i.metrics:null},getConversionRate:(c,i)=>t.find(o=>o.id===c)?.metrics.conversionRate[i]||0,isStatisticallySignificant:(c,i)=>T(c,i)<.05,isUserInTest:c=>!!e.assignments[c],getUserId:()=>u};return O.jsxDEV(Y.Provider,{value:P,children:n},void 0,!1,{fileName:"/home/ian/projects/reboot/src/contexts/ABTestContext.tsx",lineNumber:482,columnNumber:5},void 0)},L=()=>{const n=s.useContext(Y);if(!n)throw new Error("useABTest must be used within an ABTestProvider");return n},M=n=>{const{getVariant:t,trackConversion:a,isUserInTest:e}=L(),l=t(n),u=(f,p)=>{a(n,f,p)};return{variant:l,isInTest:e(n),track:u}},we=(n="hero_cta_test")=>{const{variant:t,track:a,isInTest:e}=M(n),{getOptimalCTAText:l,trackInteraction:u}=D(),f=s.useCallback(()=>!e||!t?l():{control:"Get Free Analysis",variant_a:"Unlock Growth Strategy",variant_b:"Get My Custom Plan"}[t]||l(),[t,e,l]),p=s.useCallback(v=>{u({type:"click",element:`cta_button_${v}`,value:t||"default",metadata:{testId:n,location:v}}),a("cta_click",1)},[a,u,t,n]),h=s.useCallback(v=>{u({type:"cta_view",element:`cta_button_${v}`,value:t||"default",metadata:{testId:n,location:v}})},[u,t,n]);return{ctaText:f(),variant:t,isInTest:e,trackClick:p,trackView:h}},be=(n="pricing_display_test")=>{const{variant:t,track:a,isInTest:e}=M(n),{personalization:l,trackInteraction:u}=D(),f=s.useCallback(()=>!e||!t?"standard":t==="variant_a"?"value_first":"standard",[t,e]),p=s.useCallback(()=>f()==="value_first"||l.pricing.highlightSavings,[f,l]),h=s.useCallback(()=>f()==="value_first"||l.pricing.emphasizeValue,[f,l]),v=s.useCallback((_,E)=>{u({type:"click",element:`pricing_${_}`,value:E,metadata:{testId:n,variant:t,action:_}}),a("pricing_engagement",1)},[a,u,t,n]);return{pricingStyle:f(),variant:t,isInTest:e,shouldShowSavings:p(),shouldEmphasizeValue:h(),trackEngagement:v}},Se=(n="form_optimization_test")=>{const{variant:t,track:a,isInTest:e}=M(n),{trackInteraction:l,updateFunnelStep:u,trackFormAbandonment:f}=D(),p=s.useRef(null),h=s.useCallback(()=>!e||!t?"standard":t==="variant_a"?"progressive":"standard",[t,e]),v=s.useCallback(()=>{p.current=new Date,u("form_start",!0),l({type:"form_focus",element:"lead_form",metadata:{testId:n,variant:t}}),a("form_start",1)},[a,l,u,t,n]),_=s.useCallback((m,w)=>{l({type:"form_focus",element:`form_step_${m}`,value:w,metadata:{testId:n,variant:t,stepNumber:m}})},[l,t,n]),E=s.useCallback((m,w)=>{const y=p.current?Date.now()-p.current.getTime():0;f(`form_step_${m}`,w),a("form_abandon",y/1e3)},[f,a]),T=s.useCallback(m=>{u("form_complete",!0,m),l({type:"form_focus",element:"form_complete",value:m,metadata:{testId:n,variant:t,completionTime:m}}),a("form_completion",m)},[a,l,u,t,n]);return{formStyle:h(),variant:t,isInTest:e,trackFormStart:v,trackFormStep:_,trackAbandonment:E,trackCompletion:T}},_e=()=>{const{leadScore:n,isExitIntentEligible:t}=D(),{trackConversion:a}=L();return s.useEffect(()=>{const e=u=>{const{config:f,leadTier:p}=u.detail;a("exit_intent_test","exit_intent_shown",1)},l=()=>{a("exit_intent_test","exit_intent_dismissed",1)};return window.addEventListener("showExitIntent",e),window.addEventListener("dismissExitIntent",l),()=>{window.removeEventListener("showExitIntent",e),window.removeEventListener("dismissExitIntent",l)}},[a]),{isEligible:t(),leadTier:n?.tier||"Unqualified"}},ye=()=>{const{trackScrollDepth:n,trackInteraction:t}=D(),a=s.useRef(new Set);return s.useEffect(()=>{const l=oe(()=>{const u=window.pageYOffset,f=document.documentElement.scrollHeight-window.innerHeight,p=Math.round(u/f*100);[25,50,75,90].forEach(v=>{p>=v&&!a.current.has(v)&&(a.current.add(v),n(p),t({type:"scroll",element:"page",value:v,metadata:{scrollPercent:p,milestone:v}}))})},100);return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[n,t]),{milestones:Array.from(a.current)}},Ee=()=>{const{trackInteraction:n}=D(),t=s.useRef(new Set);return s.useEffect(()=>{[30,60,120,300].forEach(e=>{const l=setTimeout(()=>{t.current.has(e)||(t.current.add(e),n({type:"scroll",element:"time_milestone",value:e,metadata:{type:"time_engagement",seconds:e}}))},e*1e3);return()=>clearTimeout(l)})},[n]),{engagementMilestones:Array.from(t.current)}},Ce=()=>{const{trackInteraction:n}=D();s.useEffect(()=>{const t=a=>{const e=a.target,l=e.getBoundingClientRect();n({type:"click",element:e.tagName.toLowerCase(),metadata:{x:a.clientX,y:a.clientY,elementX:l.left,elementY:l.top,elementWidth:l.width,elementHeight:l.height,className:e.className,id:e.id,textContent:e.textContent?.substring(0,100)}})};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[n])},Te=n=>{const{getTestResults:t,getConversionRate:a,isStatisticallySignificant:e,activeTests:l}=L(),u=l.find(h=>h.id===n),f=t(n),p=s.useCallback(()=>!u||!f?[]:u.variants.map(h=>({id:h.id,name:h.name,conversionRate:a(n,h.id),conversions:f.conversions[h.id]||0,isSignificant:e(n,h.id),isWinner:f.winner===h.id})),[u,f,n,a,e]);return{test:u,results:f,variants:p(),isRunning:u?.status==="running",hasWinner:!!f?.winner}},oe=(n,t)=>{let a,e=0;return function(...l){const u=Date.now();u-e>t?(n(...l),e=u):(clearTimeout(a),a=setTimeout(()=>{n(...l),e=Date.now()},t-(u-e)))}},J=s.createContext(void 0),ke=({children:n})=>{const[t,a]=s.useState(!1);return O.jsxDEV(J.Provider,{value:{showDropdownForm:t,setShowDropdownForm:a},children:n},void 0,!1,{fileName:"/home/ian/projects/reboot/src/contexts/LeadFormContext.tsx",lineNumber:15,columnNumber:5},void 0)},De=()=>{const n=s.useContext(J);if(!n)throw new Error("useLeadForm must be used within a LeadFormProvider");return n};function xe(){s.useEffect(()=>{K(e=>{k.coreWebVital("lcp",e.value,e.rating)}),ee(e=>{k.coreWebVital("fid",e.value,e.rating)}),te(e=>{k.coreWebVital("cls",e.value,e.rating)}),ne(e=>{k.coreWebVital("ttfb",e.value,e.rating)}),ae(e=>{k.coreWebVital("inp",e.value,e.rating)}),ie(e=>{k.coreWebVital("fcp",e.value,e.rating)});let n=0;const t=new Set,a=()=>{const e=Math.round(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100);e>n&&(n=e,[25,50,75,100].forEach(l=>{e>=l&&!t.has(l)&&(t.add(l),k.scrollDepth(l))}))};return window.addEventListener("scroll",a,{passive:!0}),()=>{window.removeEventListener("scroll",a)}},[])}const F=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),ce={errors:[],notifications:[],isReporting:!1,globalErrorCount:0},le=(n,t)=>{switch(t.type){case"ADD_ERROR":{const a={...t.payload,id:F(),timestamp:new Date,resolved:!1};return{...n,errors:[...n.errors,a],globalErrorCount:n.globalErrorCount+1}}case"RESOLVE_ERROR":return{...n,errors:n.errors.map(a=>a.id===t.payload.id?{...a,resolved:!0}:a)};case"CLEAR_ERRORS":return{...n,errors:[]};case"ADD_NOTIFICATION":{const a={...t.payload,id:F()};return{...n,notifications:[...n.notifications,a]}}case"REMOVE_NOTIFICATION":return{...n,notifications:n.notifications.filter(a=>a.id!==t.payload.id)};case"CLEAR_NOTIFICATIONS":return{...n,notifications:[]};case"SET_REPORTING":return{...n,isReporting:t.payload.isReporting};case"INCREMENT_GLOBAL_ERROR_COUNT":return{...n,globalErrorCount:n.globalErrorCount+1};default:return n}},X=s.createContext(null),Re=({children:n,enableErrorReporting:t=!0})=>{const[a,e]=s.useReducer(le,ce),l=s.useCallback(m=>{const w=F();if(e({type:"ADD_ERROR",payload:m}),m.severity==="high"||m.severity==="critical"){const y=m.severity==="critical"?"Critical Error":"Error Occurred";p({title:y,message:m.message,type:"error",duration:m.severity==="critical"?0:5e3,actions:[{label:"Dismiss",action:()=>h(w),variant:"secondary"},{label:"Retry",action:()=>{window.location.reload()},variant:"primary"}]})}return w},[]),u=s.useCallback(m=>{e({type:"RESOLVE_ERROR",payload:{id:m}})},[]),f=s.useCallback(()=>{e({type:"CLEAR_ERRORS"})},[]),p=s.useCallback(m=>{const w=F();return e({type:"ADD_NOTIFICATION",payload:m}),m.duration&&m.duration>0&&setTimeout(()=>{h(w)},m.duration),w},[]),h=s.useCallback(m=>{e({type:"REMOVE_NOTIFICATION",payload:{id:m}})},[]),v=s.useCallback(()=>{e({type:"CLEAR_NOTIFICATIONS"})},[]),_=s.useCallback(async(m,w)=>{if(t){e({type:"SET_REPORTING",payload:{isReporting:!0}});try{const y={message:m.message,stack:m.stack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,context:w||{}};console.group("ðŸš¨ Reporting Error to External Service"),console.error("Error Data:",y),console.groupEnd(),l({message:m.message,severity:"high",source:"ErrorReporting",details:{context:w,stack:m.stack}})}catch(y){console.error("Failed to report error:",y),p({title:"Reporting Failed",message:"Unable to report error. Please try again or contact support.",type:"warning",duration:5e3})}finally{e({type:"SET_REPORTING",payload:{isReporting:!1}})}}},[t,l,p]),E=s.useCallback(()=>{const m={total:a.errors.length,bySource:{},bySeverity:{}};return a.errors.forEach(w=>{m.bySource[w.source]=(m.bySource[w.source]||0)+1,m.bySeverity[w.severity]=(m.bySeverity[w.severity]||0)+1}),m},[a.errors]),T={state:a,addError:l,resolveError:u,clearErrors:f,showNotification:p,hideNotification:h,clearNotifications:v,reportError:_,getErrorStats:E};return O.jsxDEV(X.Provider,{value:T,children:n},void 0,!1,{fileName:"/home/ian/projects/reboot/src/contexts/ErrorContext.tsx",lineNumber:396,columnNumber:5},void 0)},ue=()=>{const n=s.useContext(X);if(!n)throw new Error("useError must be used within an ErrorProvider");return n},Ie=()=>{const{reportError:n}=ue();return s.useCallback((t,a)=>{const e={timestamp:new Date().toISOString(),url:window.location.href,pathname:window.location.pathname,userAgent:navigator.userAgent,...a};return n(t,e)},[n])};export{ve as A,he as C,Re as E,ke as L,be as a,we as b,De as c,Se as d,ue as e,_e as f,L as g,Te as h,Ie as i,ye as j,Ee as k,Ce as l,xe as m,D as u};
